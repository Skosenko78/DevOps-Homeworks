# **5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения.**

# *Задача 1*
В аппаратой виртуализации гипервизор имеет прямой доступ к физическими ресурсами сервера. Не требуется предварительная установка ОС.

При использовании паравиртуализации нужно предварительно установить ОС, после чего устанавливается и запускается гипервизор. В данном случае требуется модификация ядра гостевых ОС.

В случае с виртуализацией на основе ОС, также требуется предварительная установка ОС, но виртуальные машины не имеют собственного ядра, а используют ресурсы ядра хостовой ОС.

# *Задача 2*

- Высоконагруженная база данных, чувствительная к отказу.

"Физические сервера". Для быстрой обработки запросов лучше использовать прямой доступ к физическим ресурсам сервера. В данном случае узким местом является дисковая система. Скорость работы и оказоустойчивость можно улучшить с помощью аппаратного RAID. 

- Различные web-приложения.

"Виртуализация уровня ОС". Позволит быстро добавить/удалить контейнеры, обслуживающие web-приложения. Также можно просто перенести контейнер на другой сервер, если потребуется. 

- Windows системы для использования бухгалтерским отделом.

"Паравиртуализация". Применение данной технологии в указанных условиях позволит без проблем перенести виртуальный сервер на другой гипервизор в случае работы с оборудованием или в случае отказа.

- Системы, выполняющие высокопроизводительные расчеты на GPU.

"Физические сервера". Так же как и в случае с базами данных для снижения задержек необходим прямой доступ к физическим ресурсам сервера.

# *Задача 3*

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

Для данного сценария выберем VMWare. Данный гипервизор позволяет создавать виртуальтные машины как на базе Windows так и на базе Linux.  Позволяет реализовать все указанные задачи.

2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

Здесь будем использовать KVM. Является нативной для Linux, позволяет использовать практически любую ОС.

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

Microsoft Hyper-V. Для разворачивания виртуальных машин потребуются лицензии Windows, Hyper-V не требует дополнительного лицензирования и покупки.

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

VirtualBox максимально подходит для данного сценария. В паре с Vagrant позволяет быстро создавать, удалять и пересоздавать виртуальные машины.


# *Задача 4*

Проблемы и недостатки гетерогенной среды виртуализации.

Главная проблема - это сложность поддержки данной среды. Усложняется диагностика и устранение возможных неисправностей. Чтобы автоматизировать задачи потребуется создание сценариев для разных сред. Отсутствует возможность миграции виртуальных машин и данных между средами виртуализации. Для минимизации проблем необходимо создавать виртуальные машины, выполняющие общую задачу в рамках одной среды виртуализации.

Я бы использовал гетерогенную среду виртуализации для разделения тестовой среды и рабочей. К примеру, рабочие виртуальные машины работают под управлением гипервизора VMware, а тестирование сценариев автоматизации, ПО и т.д. можно выполнять на VirtualBox. Также можно использовать гетерогенную среду для запуска контейнеров (виртуализация уровня ОС). К примеру, в виртуальной машине запустить несколько docker контейнеров.